{% extends "guest_layout.html" %}

{% block guest_content %}

<!-- Recently Added Items Section -->
<div class="mt-8">
    <div class="flex justify-between items-center py-4">
        <h2 class="text-2xl font-semibold text-gray-800 mb-4">Menu Items</h2>


    </div>

    <div class="grid gap-4">
        <!-- Cart Items -->
        {% for item_id, item in cart.items() %}
        <div class="bg-white p-4 rounded-lg shadow-md flex items-center justify-between">
            <div class="flex items-center space-x-4 flex-1">
                <!-- Item Image -->
                {% if item.image_url %}
                <img src="{{ url_for('static', filename='uploads/items/' + item.image_url) }}" alt="{{ item.name }}"
                    class="h-16 w-16 object-contain rounded">
                {% else %}
                <img src="{{ url_for('static', filename='uploads/items/default_image.png') }}" alt="No image available"
                    class="h-16 w-16 object-contain rounded">
                {% endif %}

                <!-- Item Details -->
                <div class="flex-1">
                    <h3 class="font-semibold text-gray-800">{{ item.name }}</h3>
                    <div class="text-sm text-gray-600 mt-1">
                        <span>Price: ${{ item.price }}</span>
                        <span class="mx-2">|</span>
                        <span>Quantity: {{ item.quantity }}</span>
                        <span class="mx-2">|</span>
                        <span>Subtotal: ${{ "%.2f"|format(item.price * item.quantity) }}</span>
                    </div>
                </div>

                <!-- Item Total -->
                <div class="text-right mr-4">
                    <div class="font-semibold text-gray-800">${{ "%.2f"|format(item.price * item.quantity) }}</div>
                </div>

                <!-- Remove Button -->
                <form method="POST" action="{{ url_for('remove_from_cart', item_id=item_id) }}">
                    <button type="submit" class="text-red-500 hover:text-red-700 text-sm font-medium">
                        Remove
                    </button>
                </form>
            </div>
        </div>
        {% endfor %}

        <!-- Total Amount -->
        <div class="bg-gray-50 p-4 rounded-lg mt-4 flex justify-end items-center">
            <span class="font-bold text-gray-800 mr-4">Total Amount:</span>
            <span class="font-bold text-gray-800">${{ "%.2f"|format(total_price) }}</span>
        </div>

        <!-- Action Buttons -->
        <div class="flex justify-end space-x-4 mt-4">
            <a href="{{ url_for('index') }}" class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">
                Continue Shopping
            </a>
            <a href="{{ url_for('checkout') }}" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
                Proceed to Checkout
            </a>
        </div>
    </div>

</div>

{% endblock %}